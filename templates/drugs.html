{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <h1>Drug Inventory</h1>
    <a href="{{ url_for('add_drug') }}" class="btn btn-primary">Add New Drug</a>
</div>

{% if drugs %}
<div class="table">
    <div class="table-header">
        <div>Name</div>
        <div>Quantity</div>
        <div>Price</div>
        <div>Expiry Date</div>
        <div>Status</div>
        <div>Actions</div>
    </div>
    
    {% for drug in drugs %}
    <div class="table-row {% if drug.is_expired() %}expired{% endif %}">
        <div><strong>{{ drug.name }}</strong></div>
        <div>{{ drug.quantity }}</div>
        <div>${{ "%.2f"|format(drug.price) if drug.price else 'N/A' }}</div>
        <div>{{ drug.expiry_date.strftime('%Y-%m-%d') }}</div>
        <div>
            {% if drug.is_expired() %}
            <span style="color: red; font-weight: bold;">EXPIRED</span>
            {% elif drug.quantity < 10 %}
            <span style="color: orange; font-weight: bold;">LOW STOCK</span>
            {% else %}
            <span style="color: green;">OK</span>
            {% endif %}
        </div>
        <div class="actions">
            <a href="{{ url_for('edit_drug', drug_id=drug.id) }}" class="btn btn-secondary">Edit</a>
            <a href="{{ url_for('delete_drug', drug_id=drug.id) }}" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete {{ drug.name }}?')">Delete</a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <h3>No Drugs Found</h3>
    <p>Your drug inventory is empty. Add your first drug to get started!</p>
    <a href="{{ url_for('add_drug') }}" class="btn btn-primary">Add Your First Drug</a>
</div>
{% endif %}
{% endblock %}